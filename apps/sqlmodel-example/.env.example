
# =============================================================================
# REDPANDA CONFIGURATION
# =============================================================================

# Redpanda Enterprise license key (required for postgres_cdc connector).
# Get a trial license: https://redpanda.com/try-enterprise
REDPANDA_LICENSE=your_enterprise_license

# =============================================================================
# POSTGRESQL CONFIGURATION (OLTP Database)
# =============================================================================

# PostgreSQL connection details
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=sqlmodel_db
DB_HOST=localhost
DB_PORT=5434

APP_NAME=sqlmodel

# =============================================================================
# CDC (CHANGE DATA CAPTURE) CONFIGURATION
# =============================================================================

# PostgreSQL schema to monitor (default: public)
POSTGRES_CDC_SCHEMA=public

# --- CDC Publication & Slot ---
# Logical replication publication name (created by setup.sh)
POSTGRES_CDC_PUBLICATION=redpanda_cdc_publication

# Replication slot name (tracks CDC consumption position)
POSTGRES_CDC_SLOT=redpanda_cdc_slot

# --- Tables to Monitor ---
# Comma-separated list used by setup.sh to create the publication
POSTGRES_CDC_TABLES=customer,product,order,orderitem

# JSON array for templating redpanda-connect.yaml (if you script modifications)
POSTGRES_CDC_TABLES_JSON=["customer","product","order","orderitem"]

# Table to wait for before enabling CDC (ensures schema is ready)
POSTGRES_CDC_WAIT_FOR_TABLE=customer

# --- Kafka/Redpanda Configuration ---
# Topic where CDC events are published
POSTGRES_CDC_TOPIC=sqlmodel_cdc_events

# Redpanda broker address (Kafka-compatible)
POSTGRES_CDC_BROKER_ADDRESS=redpanda:9092

# --- CDC Container Configuration ---
# Redpanda Connect HTTP API (health checks, metrics)
POSTGRES_CDC_HTTP_ADDR=0.0.0.0:4195
POSTGRES_CDC_HTTP_PORT=4196

# Log level for CDC connector (debug, info, warn, error)
CDC_LOG_LEVEL=info
