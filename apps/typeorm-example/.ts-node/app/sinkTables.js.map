{"version":3,"file":"sinkTables.js","sourceRoot":"","sources":["../../app/sinkTables.ts"],"names":[],"mappings":"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","sourcesContent":["import ____moose____typia from \"typia\";\nimport { CustomerDimension, ProductDimension, OrderItemFact, CdcFields, OrderDimension, } from './models';\nimport { OlapTable, ClickHouseEngines } from '@514labs/moose-lib';\n// ==================== OLAP TABLE DEFINITIONS ====================\nexport const CustomerDimensionTable = new OlapTable<CustomerDimension & CdcFields>('dim_customer', {\n    orderByFields: ['id'],\n    engine: ClickHouseEngines.ReplacingMergeTree,\n    ver: 'lsn',\n    isDeleted: 'is_deleted',\n    // ClickHouse: ReplacingMergeTree for Type 1 SCD (automatic deduplication)\n}, ____moose____typia.json.schemas<[\n    import(\"@514labs/moose-lib\").StripDateIntersection<CustomerDimension & CdcFields>\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"email\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"name\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"country\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"city\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"createdAt\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"id\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"is_deleted\\\",\\\"data_type\\\":\\\"UInt8\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"lsn\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<import(\"@514labs/moose-lib\").StripDateIntersection<CustomerDimension & CdcFields>>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<import(\"@514labs/moose-lib\").StripDateIntersection<CustomerDimension & CdcFields>>(),\n    is: ____moose____typia.createIs<import(\"@514labs/moose-lib\").StripDateIntersection<CustomerDimension & CdcFields>>()\n});\nexport const ProductDimensionTable = new OlapTable<ProductDimension & CdcFields>('dim_product', {\n    orderByFields: ['id'],\n    // ClickHouse: ReplacingMergeTree for Type 1 SCD\n}, ____moose____typia.json.schemas<[\n    import(\"@514labs/moose-lib\").StripDateIntersection<ProductDimension & CdcFields>\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"name\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"createdAt\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"category\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"price\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"id\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"is_deleted\\\",\\\"data_type\\\":\\\"UInt8\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"lsn\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<import(\"@514labs/moose-lib\").StripDateIntersection<ProductDimension & CdcFields>>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<import(\"@514labs/moose-lib\").StripDateIntersection<ProductDimension & CdcFields>>(),\n    is: ____moose____typia.createIs<import(\"@514labs/moose-lib\").StripDateIntersection<ProductDimension & CdcFields>>()\n});\nexport const OrderDimensionTable = new OlapTable<OrderDimension & CdcFields>('dim_order', {\n    orderByFields: ['id'],\n    engine: ClickHouseEngines.ReplacingMergeTree,\n    ver: 'lsn',\n    isDeleted: 'is_deleted',\n    // ClickHouse: ReplacingMergeTree for Type 1 SCD (automatic deduplication)\n}, ____moose____typia.json.schemas<[\n    import(\"@514labs/moose-lib\").StripDateIntersection<OrderDimension & CdcFields>\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"customerId\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"orderDate\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"status\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"total\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"id\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"is_deleted\\\",\\\"data_type\\\":\\\"UInt8\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"lsn\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<import(\"@514labs/moose-lib\").StripDateIntersection<OrderDimension & CdcFields>>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<import(\"@514labs/moose-lib\").StripDateIntersection<OrderDimension & CdcFields>>(),\n    is: ____moose____typia.createIs<import(\"@514labs/moose-lib\").StripDateIntersection<OrderDimension & CdcFields>>()\n});\nexport const OrderItemTable = new OlapTable<OrderItemFact & CdcFields>('fact_order_item', {\n    orderByFields: ['id', 'orderId', 'productId'],\n    engine: ClickHouseEngines.ReplacingMergeTree,\n    ver: 'lsn',\n    isDeleted: 'is_deleted',\n}, ____moose____typia.json.schemas<[\n    import(\"@514labs/moose-lib\").StripDateIntersection<OrderItemFact & CdcFields>\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"price\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"orderId\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"productId\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"quantity\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"id\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"is_deleted\\\",\\\"data_type\\\":\\\"UInt8\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"lsn\\\",\\\"data_type\\\":\\\"UInt64\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"ttl\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<import(\"@514labs/moose-lib\").StripDateIntersection<OrderItemFact & CdcFields>>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<import(\"@514labs/moose-lib\").StripDateIntersection<OrderItemFact & CdcFields>>(),\n    is: ____moose____typia.createIs<import(\"@514labs/moose-lib\").StripDateIntersection<OrderItemFact & CdcFields>>()\n});\n"]}