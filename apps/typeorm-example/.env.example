
# =============================================================================
# REDPANDA CONFIGURATION
# =============================================================================

# Redpanda Enterprise license key (required for postgres_cdc connector)
# Get a trial license: https://redpanda.com/try-enterprise
REDPANDA_LICENSE=your_redpanda_license


# =============================================================================
# POSTGRESQL CONFIGURATION (OLTP Database)
# =============================================================================

# PostgreSQL connection details
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=typeorm_db
DB_HOST=localhost
DB_PORT=5433

APP_NAME=typeorm

# =============================================================================
# CDC (CHANGE DATA CAPTURE) CONFIGURATION
# =============================================================================

# --- PostgreSQL CDC Connection ---
# Full DSN for Redpanda Connect to read PostgreSQL WAL
# IMPORTANT: Must include ?sslmode=disable for CDC connector
# POSTGRES_CDC_DSN=postgresql://postgres:postgres@sqlmodel-postgres:5432/typeorm_db?sslmode=disable

# PostgreSQL schema to monitor (default: public)
POSTGRES_CDC_SCHEMA=public

# --- CDC Publication & Slot ---
# Logical replication publication name (created by init-postgres-cdc.sh)
POSTGRES_CDC_PUBLICATION=redpanda_cdc_publication

# Replication slot name (tracks CDC consumption position)
POSTGRES_CDC_SLOT=redpanda_cdc_slot

# --- Tables to Monitor ---
# JSON array for redpanda-connect.template.yaml (YAML template)
POSTGRES_CDC_TABLES=["customers","products","orders","order_items"]

# Table to wait for before starting CDC (ensures schema is ready)
POSTGRES_CDC_WAIT_FOR_TABLE=customers

# --- Kafka/Redpanda Configuration ---
# Topic where CDC events are published
POSTGRES_CDC_TOPIC=typeorm_cdc_events

# Redpanda broker address (Kafka-compatible)
POSTGRES_CDC_BROKER_ADDRESS=redpanda:9092
